# name: DeletedPrimaryDashboardTestCase.test_backfill_primary_dashboard
  '
  
  SELECT c.relname,
         CASE
             WHEN c.relispartition THEN 'p'
             WHEN c.relkind IN ('m',
                                'v') THEN 'v'
             ELSE 't'
         END
  FROM pg_catalog.pg_class c
  LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
  WHERE c.relkind IN ('f',
                      'm',
                      'p',
                      'r',
                      'v')
    AND n.nspname NOT IN ('pg_catalog',
                          'pg_toast')
    AND pg_catalog.pg_table_is_visible(c.oid)
  '
---
# name: DeletedPrimaryDashboardTestCase.test_backfill_primary_dashboard.1
  '
  
  SELECT analytickit_team.id,
         COALESCE(MIN(CASE
                          WHEN analytickit_dashboard.pinned THEN analytickit_dashboard.id
                          ELSE NULL
                      END), MIN(CASE
                                    WHEN NOT analytickit_dashboard.pinned THEN analytickit_dashboard.id
                                    ELSE NULL
                                END)) AS primary_dashboard_id
  FROM analytickit_team
  INNER JOIN analytickit_dashboard ON analytickit_dashboard.team_id = analytickit_team.id
  WHERE NOT analytickit_dashboard.deleted
  GROUP BY analytickit_team.id
  '
---
# name: DeletedPrimaryDashboardTestCase.test_backfill_primary_dashboard.2
  '
  SELECT "analytickit_team"."id",
         "analytickit_team"."primary_dashboard_id"
  FROM "analytickit_team"
  LEFT OUTER JOIN "analytickit_dashboard" ON ("analytickit_team"."primary_dashboard_id" = "analytickit_dashboard"."id")
  WHERE ("analytickit_dashboard"."deleted"
         OR "analytickit_team"."primary_dashboard_id" IS NULL)
  '
---
# name: DeletedPrimaryDashboardTestCase.test_backfill_primary_dashboard.3
  '
  
  SELECT c.relname,
         CASE
             WHEN c.relispartition THEN 'p'
             WHEN c.relkind IN ('m',
                                'v') THEN 'v'
             ELSE 't'
         END
  FROM pg_catalog.pg_class c
  LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
  WHERE c.relkind IN ('f',
                      'm',
                      'p',
                      'r',
                      'v')
    AND n.nspname NOT IN ('pg_catalog',
                          'pg_toast')
    AND pg_catalog.pg_table_is_visible(c.oid)
  '
---
# name: DeletedPrimaryDashboardTestCase.test_backfill_primary_dashboard.4
  '
  
  SELECT c.relname,
         CASE
             WHEN c.relispartition THEN 'p'
             WHEN c.relkind IN ('m',
                                'v') THEN 'v'
             ELSE 't'
         END
  FROM pg_catalog.pg_class c
  LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
  WHERE c.relkind IN ('f',
                      'm',
                      'p',
                      'r',
                      'v')
    AND n.nspname NOT IN ('pg_catalog',
                          'pg_toast')
    AND pg_catalog.pg_table_is_visible(c.oid)
  '
---
# name: DeletedPrimaryDashboardTestCase.test_backfill_primary_dashboard.5
  '
  SELECT "django_migrations"."id",
         "django_migrations"."app",
         "django_migrations"."name",
         "django_migrations"."applied"
  FROM "django_migrations"
  '
---
