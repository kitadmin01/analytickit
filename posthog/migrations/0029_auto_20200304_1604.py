# Generated by Django 3.0.3 on 2020-03-04 16:04

import django.contrib.postgres.fields
from django.db import migrations, models

def migrate_to_array(apps, schema_editor):

    Team = apps.get_model('posthog', 'Team')

    for mm in Team.objects.all():
        mm.app_url = [mm.app_url_old]
        mm.save()


def rollback_to_string(apps, schema_editor):

    Team = apps.get_model('posthog', 'Team')

    for mm in Team.objects.all():
        mm.app_url_old = mm.app_url[0]
        mm.save()

class Migration(migrations.Migration):

    dependencies = [
        ('posthog', '0028_actionstep_url_matching'),
    ]

    operations = [
        migrations.RenameField(
            model_name='team',
            old_name='app_url',
            new_name='app_url_old',
        ),
        migrations.AddField(
            model_name='team',
            name='app_url',
            field=django.contrib.postgres.fields.ArrayField(base_field=models.CharField(blank=True, max_length=200, null=True), default=list, size=None),
        ),
        migrations.RunPython(migrate_to_array, rollback_to_string),
        migrations.RemoveField(
            model_name='team',
            name='app_url_old',
        )
    ]
